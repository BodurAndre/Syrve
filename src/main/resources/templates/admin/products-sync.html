<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
<meta name="description" content="Products Sync Management">
<meta name="keywords" content="admin, products, sync, syrve">
<meta name="author" content="Syrve Admin">
<meta name="robots" content="noindex, nofollow">
<title>Products Sync - Syrve Admin</title>

<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.jpg">
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/css/animate.css">
<link rel="stylesheet" href="assets/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="assets/plugins/fontawesome/css/fontawesome.min.css">
<link rel="stylesheet" href="assets/plugins/fontawesome/css/all.min.css">
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
<div id="global-loader">
<div class="whirly-loader"> </div>
</div>

<div class="main-wrapper">

<div class="header">
<div class="header-left active">
<a href="/admin/dashboard" class="logo">
<img src="assets/img/logo.png" alt="">
</a>
<a href="/admin/dashboard" class="logo-small">
<img src="assets/img/logo-small.png" alt="">
</a>
<a id="toggle_btn" href="javascript:void(0);">
</a>
</div>

<a id="mobile_btn" class="mobile_btn" href="#sidebar">
<span class="bar-icon">
<span></span>
<span></span>
<span></span>
</span>
</a>

<ul class="nav user-menu">
<li class="nav-item dropdown">
<a href="javascript:void(0);" class="dropdown-toggle nav-link" data-bs-toggle="dropdown">
<img src="assets/img/icons/notification-bing.svg" alt="img"> <span class="badge rounded-pill" id="notification-counter">0</span>
</a>
<div class="dropdown-menu notifications">
<div class="topnav-dropdown-header">
<span class="notification-title">Уведомления</span>
<a href="javascript:void(0)" class="clear-noti" onclick="clearAllNotifications()"> Очистить все </a>
</div>
<div class="noti-content">
<ul class="notification-list" id="notification-list">
<li class="notification-message">
<div class="text-center text-muted">
<small>Нет новых уведомлений</small>
</div>
</li>
</ul>
</div>
<div class="topnav-dropdown-footer">
<a href="/admin/api/orders-page">Просмотреть все заказы</a>
</div>
</div>
</li>
<li class="nav-item dropdown has-arrow main-drop">
<a href="javascript:void(0);" class="dropdown-toggle nav-link userset" data-bs-toggle="dropdown">
<span class="user-img"><img src="assets/img/profiles/avatar-02.jpg" alt="">
<span class="status online"></span></span>
</a>
<div class="dropdown-menu menu-drop-user">
<div class="profilename">
<div class="profileset">
<span class="user-img"><img src="assets/img/profiles/avatar-02.jpg" alt="">
<span class="status online"></span></span>
<div class="profilesets">
<h6 id="userName">Admin User</h6>
<h5>Administrator</h5>
</div>
</div>
<hr class="m-0">
<a class="dropdown-item" href="/admin/myProfile"> <i class="me-2" data-feather="user"></i> My Profile</a>
<a class="dropdown-item" href="/admin/settings"> <i class="me-2" data-feather="settings"></i>Settings</a>
<hr class="m-0">
<a class="dropdown-item logout pb-0" href="/logout"><img src="assets/img/icons/log-out.svg" class="me-2" alt="img">Logout</a>
</div>
</div>
</li>
</ul>

<div class="dropdown mobile-user-menu">
<a href="javascript:void(0);" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="fa fa-ellipsis-v"></i></a>
<div class="dropdown-menu dropdown-menu-right">
<a class="dropdown-item" href="/admin/myProfile">My Profile</a>
<a class="dropdown-item" href="/admin/settings">Settings</a>
<a class="dropdown-item" href="/logout">Logout</a>
</div>
</div>
</div>

<div class="sidebar" id="sidebar">
<div class="sidebar-inner slimscroll">
<div id="sidebar-menu" class="sidebar-menu">
<ul>
<li>
<a href="/admin/dashboard"><img src="assets/img/icons/dashboard.svg" alt="img"><span> Dashboard</span> </a>
</li>
<li class="submenu active">
<a href="#"><img src="assets/img/icons/product.svg" alt="img"><span> Products</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="/admin/products">Product List</a></li>
<li><a href="/admin/products/sync" class="active">Sync Products</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><img src="assets/img/icons/sales1.svg" alt="img"><span> Orders</span> <span class="menu-arrow"></span></a>
<ul>
                        <li><a href="/admin/api/orders-page">All Orders</a></li>
<li><a href="/admin/orders/pending">Pending Orders</a></li>
<li><a href="/admin/orders/completed">Completed Orders</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><img src="assets/img/icons/purchase1.svg" alt="img"><span> Restaurant</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="/admin/info">Restaurant Info</a></li>
                        <li><a href="/admin/api/terminals-page">Terminal Groups</a></li>
<li><a href="/admin/api-settings">API Settings</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><img src="assets/img/icons/expense1.svg" alt="img"><span> Addresses</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="/admin/address">Cities & Streets</a></li>
<li><a href="/admin/address/sync">Sync Addresses</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><img src="assets/img/icons/quotation1.svg" alt="img"><span> Reports</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="/admin/reports/sales">Sales Report</a></li>
<li><a href="/admin/reports/orders">Orders Report</a></li>
<li><a href="/admin/reports/products">Products Report</a></li>
</ul>
</li>
<li class="submenu">
<a href="#"><img src="assets/img/icons/return1.svg" alt="img"><span> Settings</span> <span class="menu-arrow"></span></a>
<ul>
<li><a href="/admin/myProfile">Profile</a></li>
<li><a href="/admin/users">Users</a></li>
<li><a href="/admin/system">System Settings</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div class="page-wrapper">
<div class="content container-fluid">

<div class="page-header">
<div class="row align-items-center">
<div class="col">
<h3 class="page-title">Products Sync</h3>
<ul class="breadcrumb">
<li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
<li class="breadcrumb-item"><a href="/admin/products">Products</a></li>
<li class="breadcrumb-item active">Sync Products</li>
</ul>
</div>
</div>
</div>

<div class="row">
<div class="col-md-8">
<div class="card">
<div class="card-header">
<h4 class="card-title">Sync Products from Syrve</h4>
<p class="card-text">Synchronize your product catalog with the latest data from Syrve API</p>
</div>
<div class="card-body">
<div class="sync-status mb-4">
<div class="row">
<div class="col-md-3">
<div class="status-card">
<div class="status-icon bg-primary">
<i class="fas fa-box"></i>
</div>
<div class="status-info">
<h6>Total Products</h6>
<h4 id="totalProducts">0</h4>
</div>
</div>
</div>
<div class="col-md-3">
<div class="status-card">
<div class="status-icon bg-success">
<i class="fas fa-utensils"></i>
</div>
<div class="status-info">
<h6>Dishes</h6>
<h4 id="totalDishes">0</h4>
</div>
</div>
</div>
<div class="col-md-3">
<div class="status-card">
<div class="status-icon bg-info">
<i class="fas fa-tags"></i>
</div>
<div class="status-info">
<h6>Modifiers</h6>
<h4 id="totalModifiers">0</h4>
</div>
</div>
</div>
<div class="col-md-3">
<div class="status-card">
<div class="status-icon bg-warning">
<i class="fas fa-clock"></i>
</div>
<div class="status-info">
<h6>Last Sync</h6>
<h4 id="lastSync">Never</h4>
</div>
</div>
</div>
</div>
</div>

<div class="sync-controls">
<div class="row">
<div class="col-md-6">
<div class="form-group">
<label>Sync Options</label>
<div class="form-check">
<input class="form-check-input" type="checkbox" id="clearExisting" checked>
<label class="form-check-label" for="clearExisting">
Clear existing products before sync
</label>
</div>
<div class="form-check">
<input class="form-check-input" type="checkbox" id="syncImages" checked>
<label class="form-check-label" for="syncImages">
Sync product images
</label>
</div>
<div class="form-check">
<input class="form-check-input" type="checkbox" id="syncPrices" checked>
<label class="form-check-label" for="syncPrices">
Sync prices and availability
</label>
</div>
</div>
</div>
<div class="col-md-6">
<div class="form-group">
<label>API Status</label>
<div class="api-status-indicator">
<span class="status-dot" id="apiStatusDot"></span>
<span class="status-text" id="apiStatusText">Checking...</span>
</div>
<div class="mt-2">
<small class="text-muted">API Login: <span id="apiLoginDisplay">Not configured</span></small>
</div>
</div>
</div>
</div>

<div class="sync-actions mt-4">
<button type="button" class="btn btn-primary btn-lg" id="startSync">
<i class="fas fa-sync-alt"></i> Start Sync
</button>
<button type="button" class="btn btn-outline-secondary btn-lg ms-2" id="checkStatus">
<i class="fas fa-info-circle"></i> Check Status
</button>
<button type="button" class="btn btn-outline-danger btn-lg ms-2" id="clearProducts">
<i class="fas fa-trash"></i> Clear All Products
</button>
</div>
</div>
</div>
</div>
</div>

<div class="col-md-4">
<div class="card">
<div class="card-header">
<h4 class="card-title">Sync Progress</h4>
</div>
<div class="card-body">
<div class="sync-progress" id="syncProgress" style="display: none;">
<div class="progress mb-3">
<div class="progress-bar progress-bar-striped progress-bar-animated" 
     role="progressbar" 
     style="width: 0%" 
     id="progressBar">0%</div>
</div>
<div class="progress-info">
<div class="progress-step">
<span class="step-icon" id="step1Icon"><i class="fas fa-circle"></i></span>
<span class="step-text">Connecting to API</span>
</div>
<div class="progress-step">
<span class="step-icon" id="step2Icon"><i class="fas fa-circle"></i></span>
<span class="step-text">Downloading data</span>
</div>
<div class="progress-step">
<span class="step-icon" id="step3Icon"><i class="fas fa-circle"></i></span>
<span class="step-text">Processing products</span>
</div>
<div class="progress-step">
<span class="step-icon" id="step4Icon"><i class="fas fa-circle"></i></span>
<span class="step-text">Saving to database</span>
</div>
</div>
<div class="sync-log mt-3">
<h6>Sync Log</h6>
<div class="log-container" id="syncLog">
<!-- Log messages will appear here -->
</div>
</div>
</div>
<div class="no-sync" id="noSync">
<p class="text-center text-muted">
<i class="fas fa-info-circle fa-2x mb-3"></i><br>
No sync in progress. Click "Start Sync" to begin synchronization.
</p>
</div>
</div>
</div>
</div>
</div>

<div class="row">
<div class="col-12">
<div class="card">
<div class="card-header">
<h4 class="card-title">Recent Sync History</h4>
</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped custom-table">
<thead>
<tr>
<th>Date</th>
<th>Status</th>
<th>Products Synced</th>
<th>Duration</th>
<th>Details</th>
</tr>
</thead>
<tbody id="syncHistoryTable">
<!-- Sync history will be loaded here -->
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<script src="assets/js/jquery-3.6.0.min.js"></script>
<script src="assets/js/feather.min.js"></script>
<script src="assets/js/jquery.slimscroll.min.js"></script>
<script src="assets/js/jquery.dataTables.min.js"></script>
<script src="assets/js/dataTables.bootstrap4.min.js"></script>
<script src="assets/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/script.js"></script>
<script src="assets/js/products-sync.js"></script>
<script src="assets/js/notifications.js"></script>
<script>
function clearAllNotifications() {
    if (notificationManager) {
        notificationManager.notifications = [];
        notificationManager.updateNotificationCounter();
        document.getElementById('notification-list').innerHTML = `
            <li class="notification-message">
                <div class="text-center text-muted">
                    <small>Нет новых уведомлений</small>
                </div>
            </li>
        `;
    }
}
</script>
</body>
</html> 